import{j as e,r as d}from"./ui-vendor-CLlWv0Ul.js";import{W as G,V as A,y,a4 as U,a5 as w}from"./pages-C_-B4kC1.js";import{B as E,_ as B,j as D,U as J,J as v,E as C}from"./utils-vendor-Ba2y7g8A.js";import"./react-vendor-Ckhrjn13.js";import"./form-vendor-BSiPuYWr.js";const R=()=>e.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 text-white p-8 rounded-t-2xl",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(E,{className:"h-8 w-8"}),e.jsx("h1",{className:"text-3xl font-bold",children:"Cadastro de Gabinete"})]}),e.jsx("p",{className:"text-blue-100 text-lg",children:"Registre seu gabinete no sistema e comece a gerenciar seus contatos e interações"})]}),T=({error:r,success:i})=>e.jsxs(e.Fragment,{children:[r&&e.jsxs("div",{className:"flex items-center gap-2 p-4 bg-red-50 border border-red-200 rounded-lg text-red-700",children:[e.jsx(B,{className:"h-5 w-5"}),e.jsx("span",{children:r})]}),i&&e.jsxs("div",{className:"flex items-center gap-2 p-4 bg-green-50 border border-green-200 rounded-lg text-green-700",children:[e.jsx(D,{className:"h-5 w-5"}),e.jsx("span",{children:i})]})]}),L=({formData:r,onInputChange:i})=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-800 flex items-center gap-2",children:[e.jsx(E,{className:"h-5 w-5 text-blue-600"}),"Dados do Gabinete"]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nome do Gabinete *"}),e.jsx("input",{type:"text",value:r.cabinetName,onChange:l=>i("cabinetName",l.target.value),placeholder:"Ex: Gabinete do Vereador João Silva",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]})]}),$=({formData:r,onInputChange:i})=>e.jsxs("div",{children:[e.jsx("label",{htmlFor:"institutionalEmail",className:"block text-sm font-medium text-gray-700 mb-2",children:"E-mail Institucional *"}),e.jsx("input",{type:"email",id:"institutionalEmail",value:r.institutionalEmail||"",onChange:l=>i("institutionalEmail",l.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"contato@gabinete.gov.br",required:!0})]}),H=({formData:r,showPassword:i,showConfirmPassword:l,passwordStrength:n,onInputChange:c,onTogglePassword:m,onToggleConfirmPassword:x,onPasswordChange:b})=>e.jsxs("div",{className:"space-y-6 border-t pt-8",children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-800 flex items-center gap-2",children:[e.jsx(J,{className:"h-5 w-5 text-blue-600"}),"Dados do Usuário Administrador"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nome Completo *"}),e.jsx("input",{type:"text",value:r.adminName,onChange:a=>c("adminName",a.target.value),placeholder:"Nome completo do administrador",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"E-mail (será usado para login) *"}),e.jsx("input",{type:"email",value:r.adminEmail,onChange:a=>c("adminEmail",a.target.value),placeholder:"admin@gabinete.gov.br",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Senha *"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:i?"text":"password",value:r.password,onChange:a=>b(a.target.value),placeholder:"Mínimo 8 caracteres",className:"w-full px-4 py-3 pr-12 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0}),e.jsx("button",{type:"button",onClick:m,className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700",children:i?e.jsx(v,{className:"h-5 w-5"}):e.jsx(C,{className:"h-5 w-5"})})]}),n&&e.jsx("div",{className:"mt-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex-1 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${n==="weak"?"w-1/3 bg-red-500":n==="medium"?"w-2/3 bg-yellow-500":"w-full bg-green-500"}`})}),e.jsx("span",{className:`text-sm font-medium ${n==="weak"?"text-red-600":n==="medium"?"text-yellow-600":"text-green-600"}`,children:n==="weak"?"Fraca":n==="medium"?"Média":"Forte"})]})})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirmar Senha *"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:l?"text":"password",value:r.confirmPassword,onChange:a=>c("confirmPassword",a.target.value),placeholder:"Digite a senha novamente",className:"w-full px-4 py-3 pr-12 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0}),e.jsx("button",{type:"button",onClick:x,className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700",children:l?e.jsx(v,{className:"h-5 w-5"}):e.jsx(C,{className:"h-5 w-5"})})]})]})]})]}),O=({isLoading:r})=>e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 pt-6 border-t",children:[e.jsx("button",{type:"submit",disabled:r,className:"flex-1 bg-gradient-to-r from-blue-600 to-indigo-600 text-white py-3 px-6 rounded-lg font-semibold hover:from-blue-700 hover:to-indigo-700 focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200",children:r?"Cadastrando...":"Cadastrar Gabinete"}),e.jsx(G,{to:"/login",className:"flex-1 bg-gray-100 text-gray-700 py-3 px-6 rounded-lg font-semibold hover:bg-gray-200 focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 transition-all duration-200 text-center",children:"Já tenho conta"})]});function X(){const r=A(),[i,l]=d.useState(!1),[n,c]=d.useState(!1),[m,x]=d.useState(!1),[b,a]=d.useState(""),[P,h]=d.useState(""),[S,p]=d.useState(null),[s,j]=d.useState({cabinetName:"",councilMemberName:"",municipality:"",city:"",institutionalEmail:"",adminName:"",adminEmail:"",password:"",confirmPassword:""}),u=(t,o)=>{if(t.includes(".")){const[g,M]=t.split(".");j(N=>{const f=N[g];return{...N,[g]:{...typeof f=="object"&&f!==null?f:{},[M]:o}}})}else j(g=>({...g,[t]:o}))},k=t=>{if(u("password",t),t){const o=y(t);p(o.strength)}else p(null)},F=()=>{c(!n)},V=()=>{x(!m)},q=()=>{if(!s.cabinetName.trim())return a("Nome do gabinete é obrigatório"),!1;if(!s.councilMemberName.trim())return a("Nome do vereador é obrigatório"),!1;if(!s.municipality.trim())return a("Município é obrigatório"),!1;if(!s.city.trim())return a("Cidade é obrigatória"),!1;if(!s.institutionalEmail.trim())return a("E-mail institucional é obrigatório"),!1;if(!s.adminName.trim())return a("Nome do administrador é obrigatório"),!1;if(!s.adminEmail.trim())return a("E-mail do administrador é obrigatório"),!1;if(!s.password)return a("Senha é obrigatória"),!1;if(!s.confirmPassword)return a("Confirmação de senha é obrigatória"),!1;if(!w(s.adminEmail))return a("E-mail do administrador inválido"),!1;if(!w(s.institutionalEmail))return a("E-mail institucional inválido"),!1;const t=y(s.password);return t.isValid?s.password!==s.confirmPassword?(a("Senhas não coincidem"),!1):!0:(a(t.errors[0]),!1)},I=async t=>{if(t.preventDefault(),a(""),h(""),!!q()){l(!0);try{const o=await U.registerCabinet(s);o.success&&(h(o.message),setTimeout(()=>{r("/login")},2e3))}catch(o){a(o instanceof Error?o.message:"Erro ao cadastrar gabinete")}finally{l(!1)}}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-indigo-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"w-full max-w-4xl bg-white rounded-2xl shadow-xl border border-gray-100",children:[e.jsx(R,{}),e.jsxs("form",{onSubmit:I,className:"p-8 space-y-8",children:[e.jsx(T,{error:b,success:P}),e.jsx(L,{formData:s,onInputChange:u}),e.jsx($,{formData:s,onInputChange:u}),e.jsx(H,{formData:s,onInputChange:u,showPassword:n,showConfirmPassword:m,passwordStrength:S,onPasswordChange:k,onTogglePassword:F,onToggleConfirmPassword:V}),e.jsx(O,{isLoading:i})]})]})})}export{X as default};
