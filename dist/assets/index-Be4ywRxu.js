const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/LoginPage-C2vqMeV1.js","assets/ui-vendor-CLlWv0Ul.js","assets/react-vendor-Ckhrjn13.js","assets/pages-C_-B4kC1.js","assets/utils-vendor-Ba2y7g8A.js","assets/form-vendor-BSiPuYWr.js","assets/LandingPage-BOkQAgtG.js","assets/CabinetRegistrationPage-6YwRkld2.js","assets/DashboardPage-CTAZaDIo.js","assets/reports-Cpc1BW5J.js","assets/settings-pQAfm7Lm.js","assets/interactions-DtOuaFCc.js","assets/cabinet-management-BmqWM6zp.js","assets/task-management-RnsuU_IH.js"])))=>i.map(i=>d[i]);
import{r as j,j as e,R as i}from"./ui-vendor-CLlWv0Ul.js";import{a as I,g as O}from"./react-vendor-Ckhrjn13.js";import{u as S,G as T,U as z,V,W as P,X as R,Y as E,D as q,l as B,b as F,m as G,Z as U,K as L,n as C,_ as c,$ as W,a0 as $,a1 as H,a2 as l,a3 as m}from"./pages-C_-B4kC1.js";import{u as A,M as K}from"./settings-pQAfm7Lm.js";import{al as X,P as Y,S as Z,t as J,am as Q,a8 as ee,B as se,ae as y,F as D,X as k,an as ae,ao as te,ap as re,af as N,i as ne,I as oe}from"./utils-vendor-Ba2y7g8A.js";import"./form-vendor-BSiPuYWr.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))t(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&t(u)}).observe(document,{childList:!0,subtree:!0});function h(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function t(r){if(r.ep)return;r.ep=!0;const o=h(r);fetch(r.href,o)}})();var b={},M;function ie(){if(M)return b;M=1;var s=I();return b.createRoot=s.createRoot,b.hydrateRoot=s.hydrateRoot,b}var le=ie();const ce=O(le),x=({children:s})=>{const{user:n,logout:h}=S(),t=T(),r=z(),o=V(),[u,d]=j.useState(!1),v=async()=>{await h(),o("/login")};console.log("🔧 Layout - user:",n),console.log("🔧 Layout - permissions:",t),console.log("🔧 Layout - hasRole admin:",t.hasRole("admin")),console.log("🔧 Layout - hasRole chefe_gabinete:",t.hasRole("chefe_gabinete"));const f=[{name:"Dashboard",href:"/dashboard",icon:X,show:!0},{name:"Cadastrar Pessoa",href:"/pessoa/novo",icon:Y,show:t.canCreate()},{name:"Pesquisar Pessoas",href:"/busca",icon:Z,show:!0},{name:"Interações",href:"/interacoes",icon:J,show:t.canCreate()||t.canEdit()},{name:"Tarefas",href:"/tarefas",icon:Q,show:t.canCreate()||t.canEdit()},{name:"Relatórios",href:"/relatorios",icon:ee,show:t.canExport()},{name:"Gerenciar Gabinetes",href:"/gabinetes",icon:se,show:t.hasAnyRole(["admin","chefe_gabinete"])},{name:"Configurações",href:"/configuracoes",icon:y,show:t.canManageUsers()}].filter(a=>a.show);console.log("🔧 Layout - menuItems antes do filtro:",[{name:"Dashboard",show:!0},{name:"Cadastrar Pessoa",show:t.canCreate()},{name:"Pesquisar Pessoas",show:!0},{name:"Interações",show:t.canCreate()||t.canEdit()},{name:"Relatórios",show:t.canExport()},{name:"Gerenciar Gabinetes",show:t.hasAnyRole(["admin","chefe_gabinete"])},{name:"Configurações",show:t.canManageUsers()}]),console.log("🔧 Layout - menuItems após filtro:",f.map(a=>a.name));const g=a=>r.pathname===a||r.pathname.startsWith(a+"/"),w=a=>a.split(" ").map(p=>p.charAt(0)).join("").toUpperCase().slice(0,2),_=a=>{switch(a){case"admin":return"Administrador";case"assessor":return"Assessor";case"visualizador":return"Visualizador";default:return a}};return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"hidden md:flex md:w-64 md:flex-col md:fixed md:inset-y-0",children:e.jsxs("div",{className:"flex-1 flex flex-col min-h-0 bg-white border-r border-gray-200",children:[e.jsxs("div",{className:"flex items-center h-16 flex-shrink-0 px-4 bg-primary",children:[e.jsx(D,{className:"h-8 w-8 text-white"}),e.jsx("span",{className:"ml-2 text-xl font-semibold text-white",children:"Gabinete Digital"})]}),e.jsx("div",{className:"flex-1 flex flex-col overflow-y-auto",children:e.jsx("nav",{className:"flex-1 px-2 py-4 space-y-1",children:f.map(a=>{const p=a.icon;return e.jsxs(P,{to:a.href,className:`
                      group flex items-center px-2 py-2 text-sm font-medium rounded-md transition-colors
                      ${g(a.href)?"bg-primary text-white":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"}
                    `,children:[e.jsx(p,{className:`
                        mr-3 flex-shrink-0 h-5 w-5
                        ${g(a.href)?"text-white":"text-gray-400 group-hover:text-gray-500"}
                      `}),a.name]},a.name)})})}),e.jsx("div",{className:"flex-shrink-0 flex border-t border-gray-200 p-4",children:e.jsxs("div",{className:"flex items-center w-full",children:[e.jsx(R,{className:"h-9 w-9",children:e.jsx(E,{className:"bg-primary text-white text-sm",children:n?w(n.name):"U"})}),e.jsxs("div",{className:"ml-3 flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:n?.name}),e.jsx("p",{className:"text-xs text-gray-500 truncate",children:n?_(n.role):""})]})]})})]})}),u&&e.jsxs("div",{className:"fixed inset-0 flex z-40 md:hidden",children:[e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75",onClick:()=>d(!1)}),e.jsxs("div",{className:"relative flex-1 flex flex-col max-w-xs w-full bg-white",children:[e.jsx("div",{className:"absolute top-0 right-0 -mr-12 pt-2",children:e.jsx("button",{type:"button",className:"ml-1 flex items-center justify-center h-10 w-10 rounded-full focus:outline-none focus:ring-2 focus:ring-inset focus:ring-white",onClick:()=>d(!1),children:e.jsx(k,{className:"h-6 w-6 text-white"})})}),e.jsxs("div",{className:"flex items-center h-16 flex-shrink-0 px-4 bg-primary",children:[e.jsx(D,{className:"h-8 w-8 text-white"}),e.jsx("span",{className:"ml-2 text-xl font-semibold text-white",children:"Gabinete Digital"})]}),e.jsx("div",{className:"flex-1 flex flex-col overflow-y-auto",children:e.jsx("nav",{className:"flex-1 px-2 py-4 space-y-1",children:f.map(a=>{const p=a.icon;return e.jsxs(P,{to:a.href,onClick:()=>d(!1),className:`
                        group flex items-center px-2 py-2 text-sm font-medium rounded-md transition-colors
                        ${g(a.href)?"bg-primary text-white":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"}
                      `,children:[e.jsx(p,{className:`
                          mr-3 flex-shrink-0 h-5 w-5
                          ${g(a.href)?"text-white":"text-gray-400 group-hover:text-gray-500"}
                        `}),a.name]},a.name)})})})]})]}),e.jsxs("div",{className:"md:pl-64 flex flex-col flex-1",children:[e.jsxs("div",{className:"sticky top-0 z-10 flex-shrink-0 flex h-16 bg-white shadow",children:[e.jsx("button",{type:"button",className:"px-4 border-r border-gray-200 text-gray-500 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-primary md:hidden",onClick:()=>d(!0),children:e.jsx(ae,{className:"h-6 w-6"})}),e.jsxs("div",{className:"flex-1 px-4 flex justify-between items-center",children:[e.jsx("div",{className:"flex-1",children:e.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:f.find(a=>g(a.href))?.name||"Dashboard"})}),e.jsx("div",{className:"ml-4 flex items-center md:ml-6",children:e.jsxs(q,{children:[e.jsx(B,{asChild:!0,children:e.jsx(F,{variant:"ghost",className:"relative h-8 w-8 rounded-full",children:e.jsx(R,{className:"h-8 w-8",children:e.jsx(E,{className:"bg-primary text-white text-xs",children:n?w(n.name):"U"})})})}),e.jsxs(G,{className:"w-56",align:"end",forceMount:!0,children:[e.jsx(U,{className:"font-normal",children:e.jsxs("div",{className:"flex flex-col space-y-1",children:[e.jsx("p",{className:"text-sm font-medium leading-none",children:n?.name}),e.jsx("p",{className:"text-xs leading-none text-muted-foreground",children:n?.email}),e.jsx("p",{className:"text-xs leading-none text-muted-foreground",children:n?_(n.role):""})]})}),e.jsx(L,{}),e.jsxs(C,{onClick:()=>o("/settings"),children:[e.jsx(y,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Configurações"})]}),e.jsx(L,{}),e.jsxs(C,{onClick:v,children:[e.jsx(te,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Sair"})]})]})]})})]})]}),e.jsx("main",{className:"flex-1",children:e.jsx("div",{className:"py-6",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 md:px-8",children:s})})})]})]})},de=({...s})=>e.jsx(re,{className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...s}),me=({isVisible:s})=>s?e.jsxs("div",{className:"bg-gradient-to-r from-yellow-400 via-orange-400 to-yellow-400 text-white py-3 px-4 relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/10 to-transparent animate-pulse"}),e.jsxs("div",{className:"relative flex items-center justify-center space-x-3",children:[e.jsx(N,{className:"h-5 w-5 animate-bounce"}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"font-semibold text-sm md:text-base",children:"🔧 Sistema em Manutenção"}),e.jsx("p",{className:"text-xs md:text-sm opacity-90",children:"Estamos realizando melhorias no sistema. Algumas funcionalidades podem estar temporariamente indisponíveis."})]}),e.jsx(N,{className:"h-5 w-5 animate-bounce",style:{animationDelay:"0.5s"}})]}),e.jsx("div",{className:"absolute top-0 left-0 w-full h-full",children:e.jsx("div",{className:"animate-slide-right bg-gradient-to-r from-transparent via-white/5 to-transparent h-full w-1/3"})})]}):null,xe=({isBlocked:s})=>s?e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-2xl max-w-md w-full p-8 text-center",children:[e.jsx("div",{className:"mb-6",children:e.jsx("div",{className:"relative mx-auto w-20 h-20 bg-gradient-to-br from-yellow-400 to-orange-500 rounded-full flex items-center justify-center",children:e.jsx(y,{className:"h-10 w-10 text-white animate-spin",style:{animationDuration:"3s"}})})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Sistema em Manutenção"}),e.jsx("p",{className:"text-gray-600 mb-6 leading-relaxed",children:"Estamos realizando melhorias importantes no sistema. Durante este período, algumas funcionalidades estão temporariamente indisponíveis."}),e.jsxs("div",{className:"space-y-3 text-sm text-gray-500",children:[e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx(ne,{className:"h-4 w-4"}),e.jsx("span",{children:"Tempo estimado: Em breve"})]}),e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx(oe,{className:"h-4 w-4"}),e.jsx("span",{children:"Seus dados estão seguros"})]})]}),e.jsx("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg",children:e.jsx("p",{className:"text-blue-800 text-sm font-medium",children:"Obrigado pela sua paciência! 🙏"})})]})}):null,he=({onClose:s})=>{const[n,h]=j.useState(!1),[t,r]=j.useState(!1),{isMaintenanceMode:o,isSystemBlocked:u}=A(),{user:d}=S();j.useEffect(()=>{if(o&&!t&&(h(!0),r(!0),d?.role==="admin")){const f=setTimeout(()=>{h(!1)},1e4);return()=>clearTimeout(f)}o||(h(!1),r(!1))},[o,t,d?.role]);const v=()=>{h(!1),s?.()};return n?e.jsx("div",{className:"fixed top-4 right-4 z-50 max-w-md",children:e.jsx("div",{className:"bg-orange-50 border border-orange-200 rounded-lg shadow-lg p-4 animate-slide-in-right",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(N,{className:"h-5 w-5 text-orange-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-orange-800 mb-1",children:u?"Sistema em Manutenção":"Modo de Manutenção Ativado"}),e.jsx("p",{className:"text-sm text-orange-700",children:u?"O sistema foi colocado em modo de manutenção. Suas funcionalidades foram temporariamente bloqueadas.":"O sistema está em modo de manutenção. Como administrador, você ainda pode acessar todas as funcionalidades."}),d?.role==="admin"&&e.jsx("p",{className:"text-xs text-orange-600 mt-2",children:"💡 Você pode desativar o modo de manutenção nas configurações do sistema."})]}),d?.role==="admin"&&e.jsx("button",{onClick:v,className:"text-orange-400 hover:text-orange-600 transition-colors p-1",title:"Fechar notificação",children:e.jsx(k,{className:"h-4 w-4"})})]})})}):null},ue=i.lazy(()=>c(()=>import("./LoginPage-C2vqMeV1.js"),__vite__mapDeps([0,1,2,3,4,5])).then(s=>({default:s.LoginPage}))),fe=i.lazy(()=>c(()=>import("./LandingPage-BOkQAgtG.js"),__vite__mapDeps([6,1,2,3,4,5]))),ge=i.lazy(()=>c(()=>import("./CabinetRegistrationPage-6YwRkld2.js"),__vite__mapDeps([7,1,2,3,4,5]))),pe=i.lazy(()=>c(()=>import("./DashboardPage-CTAZaDIo.js"),__vite__mapDeps([8,1,2,3,4,5]))),je=i.lazy(()=>c(()=>import("./pages-C_-B4kC1.js").then(s=>s.a6),__vite__mapDeps([3,1,2,4,5]))),be=i.lazy(()=>c(()=>import("./pages-C_-B4kC1.js").then(s=>s.a7),__vite__mapDeps([3,1,2,4,5]))),ve=i.lazy(()=>c(()=>import("./pages-C_-B4kC1.js").then(s=>s.a8),__vite__mapDeps([3,1,2,4,5]))),ye=i.lazy(()=>c(()=>import("./reports-Cpc1BW5J.js"),__vite__mapDeps([9,3,1,2,4,5]))),Ne=i.lazy(()=>c(()=>import("./settings-pQAfm7Lm.js").then(s=>s.S),__vite__mapDeps([10,1,2,3,4,5]))),we=i.lazy(()=>c(()=>import("./interactions-DtOuaFCc.js"),__vite__mapDeps([11,1,2,3,4,5]))),_e=i.lazy(()=>c(()=>import("./cabinet-management-BmqWM6zp.js"),__vite__mapDeps([12,1,2,3,4,5]))),Pe=i.lazy(()=>c(()=>import("./task-management-RnsuU_IH.js"),__vite__mapDeps([13,1,2,3,4,5]))),Re=()=>e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary"})});function Ee(){const{isMaintenanceMode:s,isSystemBlocked:n}=A();return e.jsx($,{children:e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(me,{isVisible:s}),e.jsx(he,{}),e.jsx(xe,{isBlocked:n}),e.jsx(j.Suspense,{fallback:e.jsx(Re,{}),children:e.jsxs(H,{children:[e.jsx(l,{path:"/",element:e.jsx(fe,{})}),e.jsx(l,{path:"/login",element:e.jsx(ue,{})}),e.jsx(l,{path:"/cadastro",element:e.jsx(ge,{})}),e.jsx(l,{path:"/dashboard",element:e.jsx(m,{children:e.jsx(x,{children:e.jsx(pe,{})})})}),e.jsx(l,{path:"/pessoa/novo",element:e.jsx(m,{requiredRoles:["admin","chefe_gabinete","assessor"],children:e.jsx(x,{children:e.jsx(je,{})})})}),e.jsx(l,{path:"/busca",element:e.jsx(m,{children:e.jsx(x,{children:e.jsx(be,{})})})}),e.jsx(l,{path:"/pessoa/:id",element:e.jsx(m,{children:e.jsx(x,{children:e.jsx(ve,{})})})}),e.jsx(l,{path:"/interacoes",element:e.jsx(m,{requiredRoles:["admin","chefe_gabinete","assessor"],children:e.jsx(x,{children:e.jsx(we,{})})})}),e.jsx(l,{path:"/relatorios",element:e.jsx(m,{requiredRoles:["admin","chefe_gabinete","assessor"],children:e.jsx(x,{children:e.jsx(ye,{})})})}),e.jsx(l,{path:"/gabinetes",element:e.jsx(m,{requiredRoles:["admin","chefe_gabinete"],children:e.jsx(x,{children:e.jsx(_e,{})})})}),e.jsx(l,{path:"/tarefas",element:e.jsx(m,{requiredRoles:["admin","chefe_gabinete","assessor"],children:e.jsx(x,{children:e.jsx(Pe,{})})})}),e.jsx(l,{path:"/configuracoes",element:e.jsx(m,{requiredRoles:["admin"],children:e.jsx(x,{children:e.jsx(Ne,{})})})})]})}),e.jsx(de,{})]})})}function Le(){return e.jsx(W,{children:e.jsx(K,{children:e.jsx(Ee,{})})})}"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js").then(s=>{console.log("SW registrado com sucesso:",s)}).catch(s=>{console.log("Falha no registro do SW:",s)})});ce.createRoot(document.getElementById("root")).render(e.jsx(i.StrictMode,{children:e.jsx(Le,{})}));
