import{r as m,j as e}from"./ui-vendor-CLlWv0Ul.js";import{u as de,C as z,o as R,p as I,B as L,J as q,r as me,Q as xe,b as N,s as ue,t as he,v as ge,w as je,L as f,I as A,S as pe,c as Ne,d as fe,e as be,f as U,O as ve,q as F,T as ae,g as re,h as O,i as b,j as te,k as v,H as G,G as $,R as B,z as ye,A as we,E as P,F as _}from"./pages-C_-B4kC1.js";import{a0 as J,P as Q,e as X,ab as Y,U as M,ac as W,ad as Z,X as Ce,r as Se,T as Ae,ae as ie,i as Te,I as D,af as ke,ag as H,ah as ne,D as le,ai as Me,a6 as De,_ as Le,j as ee,a7 as se,S as Ee,g as Ue,F as ze,aj as Re,ak as Ie}from"./utils-vendor-Ba2y7g8A.js";const oe=m.createContext(void 0),Ge=({children:l})=>{const j="maintenance_mode",[h,g]=m.useState(()=>{const o=localStorage.getItem(j);return o?JSON.parse(o):!1}),{user:n}=de(),x=o=>{g(o),localStorage.setItem(j,JSON.stringify(o)),window.dispatchEvent(new CustomEvent("maintenanceModeChanged",{detail:{enabled:o}}))};m.useEffect(()=>{const o=d=>{if(d.key===j&&d.newValue!==null){const u=JSON.parse(d.newValue);g(u)}},i=()=>{};return window.addEventListener("storage",o),window.addEventListener("maintenanceModeChanged",i),()=>{window.removeEventListener("storage",o),window.removeEventListener("maintenanceModeChanged",i)}},[]);const p=h&&n?.role!=="admin",r={isMaintenanceMode:h,setMaintenanceMode:x,isSystemBlocked:p};return e.jsx(oe.Provider,{value:r,children:l})},ce=()=>{const l=m.useContext(oe);if(l===void 0)throw new Error("useMaintenance deve ser usado dentro de um MaintenanceProvider");return l},Fe="1.0.0",Oe={version:Fe},Ve=({users:l,onUsersChange:j,isLoading:h,onLoadingChange:g})=>{const{toast:n}=G(),[x,p]=m.useState(!1),[r,o]=m.useState(null),[i,d]=m.useState({name:"",email:"",role:"visualizador"}),u=s=>({admin:"Administrador",assessor:"Assessor",visualizador:"Visualizador",chefe_gabinete:"Chefe de Gabinete"})[s],y=s=>{switch(s){case"admin":return"default";case"chefe_gabinete":return"destructive";case"assessor":return"secondary";case"visualizador":return"outline";default:return"outline"}},w=s=>{switch(s){case"admin":return e.jsx(Y,{className:"h-3 w-3"});case"chefe_gabinete":return e.jsx(M,{className:"h-3 w-3"});case"assessor":return e.jsx(W,{className:"h-3 w-3"});case"visualizador":return e.jsx(Z,{className:"h-3 w-3"});default:return e.jsx(M,{className:"h-3 w-3"})}},C=async()=>{if(!i.name||!i.email){n.error("Nome e email são obrigatórios.");return}g(!0);try{if(r){const s=l.map(a=>a.id===r.id?{...a,name:i.name,email:i.email,role:i.role}:a);j(s),n.success("Usuário atualizado com sucesso.")}else{const s={id:Date.now().toString(),name:i.name,email:i.email,role:i.role,createdAt:new Date,updatedAt:new Date};j([...l,s]),n.success("Usuário criado com sucesso.")}p(!1),o(null),d({name:"",email:"",role:"visualizador"})}catch(s){console.error("Erro ao salvar usuário:",s),n.error("Não foi possível salvar o usuário.")}finally{g(!1)}},T=s=>{o(s),d({name:s.name,email:s.email,role:s.role}),p(!0)},t=async s=>{if(confirm("Tem certeza que deseja excluir este usuário?")){g(!0);try{const a=l.filter(V=>V.id!==s);j(a),n.success("Usuário excluído com sucesso.")}catch(a){console.error("Erro ao excluir usuário:",a),n.error("Não foi possível excluir o usuário.")}finally{g(!1)}}},c=()=>{p(!1),o(null),d({name:"",email:"",role:"visualizador"})};return e.jsxs(z,{className:"border-l-4 border-l-blue-500 shadow-sm",children:[e.jsx(R,{className:"bg-blue-50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(I,{className:"flex items-center gap-2 text-gray-900",children:[e.jsx(J,{className:"h-5 w-5 text-blue-500"}),"Gerenciamento de Usuários",e.jsxs(L,{variant:"outline",className:"ml-2 bg-blue-100 text-blue-700 border-blue-300",children:[l.length," usuários"]})]}),e.jsx(q,{className:"text-gray-600",children:"Gerencie os usuários do sistema e suas permissões"})]}),e.jsxs(me,{open:x,onOpenChange:p,children:[e.jsx(xe,{asChild:!0,children:e.jsxs(N,{className:"flex items-center gap-2",children:[e.jsx(Q,{className:"h-4 w-4"}),"Novo Usuário"]})}),e.jsxs(ue,{className:"sm:max-w-md",children:[e.jsxs(he,{children:[e.jsx(ge,{className:"flex items-center gap-2",children:r?e.jsxs(e.Fragment,{children:[e.jsx(X,{className:"h-5 w-5"}),"Editar Usuário"]}):e.jsxs(e.Fragment,{children:[e.jsx(Q,{className:"h-5 w-5"}),"Novo Usuário"]})}),e.jsx(je,{children:r?"Edite as informações do usuário selecionado.":"Preencha as informações para criar um novo usuário."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(f,{htmlFor:"userName",children:"Nome"}),e.jsx(A,{id:"userName",value:i.name,onChange:s=>d(a=>({...a,name:s.target.value})),placeholder:"Nome completo"})]}),e.jsxs("div",{children:[e.jsx(f,{htmlFor:"userEmail",children:"Email"}),e.jsx(A,{id:"userEmail",type:"email",value:i.email,onChange:s=>d(a=>({...a,email:s.target.value})),placeholder:"email@exemplo.com"})]}),e.jsxs("div",{children:[e.jsx(f,{htmlFor:"userRole",children:"Função"}),e.jsxs(pe,{value:i.role,onValueChange:s=>d(a=>({...a,role:s})),children:[e.jsx(Ne,{children:e.jsx(fe,{})}),e.jsxs(be,{children:[e.jsx(U,{value:"admin",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Y,{className:"h-4 w-4"}),"Administrador"]})}),e.jsx(U,{value:"chefe_gabinete",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(M,{className:"h-4 w-4"}),"Chefe de Gabinete"]})}),e.jsx(U,{value:"assessor",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(W,{className:"h-4 w-4"}),"Assessor"]})}),e.jsx(U,{value:"visualizador",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Z,{className:"h-4 w-4"}),"Visualizador"]})})]})]})]}),!r&&e.jsxs("div",{children:[e.jsx(f,{htmlFor:"userPassword",children:"Senha Temporária"}),e.jsx(A,{id:"userPassword",type:"password",value:i.password||"",onChange:s=>d(a=>({...a,password:s.target.value})),placeholder:"Senha temporária (opcional)"})]})]}),e.jsxs(ve,{className:"flex gap-2",children:[e.jsxs(N,{variant:"outline",onClick:c,children:[e.jsx(Ce,{className:"h-4 w-4 mr-2"}),"Cancelar"]}),e.jsx(N,{onClick:C,disabled:h,children:h?"Salvando...":r?"Atualizar":"Criar"})]})]})]})]})}),e.jsxs(F,{className:"space-y-4",children:[e.jsx("div",{className:"border rounded-lg overflow-hidden",children:e.jsxs(ae,{children:[e.jsx(re,{children:e.jsxs(O,{className:"bg-gray-50",children:[e.jsx(b,{className:"font-semibold",children:"Usuário"}),e.jsx(b,{className:"font-semibold",children:"Email"}),e.jsx(b,{className:"font-semibold",children:"Função"}),e.jsx(b,{className:"font-semibold",children:"Último Login"}),e.jsx(b,{className:"text-right font-semibold",children:"Ações"})]})}),e.jsx(te,{children:l.map(s=>e.jsxs(O,{className:"hover:bg-gray-50",children:[e.jsx(v,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx(M,{className:"h-4 w-4 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:s.name}),e.jsxs("div",{className:"text-sm text-gray-500",children:["ID: ",s.id]})]})]})}),e.jsx(v,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Se,{className:"h-4 w-4 text-gray-400"}),s.email]})}),e.jsx(v,{children:e.jsxs(L,{variant:y(s.role),className:"flex items-center gap-1 w-fit",children:[w(s.role),u(s.role)]})}),e.jsx(v,{children:"Nunca"}),e.jsx(v,{children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx(N,{variant:"outline",size:"sm",onClick:()=>T(s),children:e.jsx(X,{className:"h-4 w-4"})}),e.jsx(N,{variant:"outline",size:"sm",onClick:()=>t(s.id),disabled:s.role==="admin",className:s.role==="admin"?"opacity-50 cursor-not-allowed":"",children:e.jsx(Ae,{className:"h-4 w-4"})})]})})]},s.id))})]})}),l.length===0&&e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(J,{className:"mx-auto h-12 w-12 text-gray-300 mb-4"}),e.jsx("p",{children:"Nenhum usuário cadastrado"})]})]})]})},Be=({settings:l,onSettingsChange:j,isLoading:h,onLoadingChange:g})=>{const n=$(),{toast:x}=G(),{setMaintenanceMode:p}=ce(),[r,o]=m.useState(l),[i,d]=m.useState(!1);m.useEffect(()=>{o(l),d(!1)},[l]),m.useEffect(()=>{const t=JSON.stringify(r)!==JSON.stringify(l);d(t)},[r,l]);const u=(t,c)=>{o(s=>({...s,[t]:c}))},y=async()=>{if(!n.hasRole("admin")){x.error("Você não tem permissão para alterar as configurações do sistema.");return}g(!0);try{if(r.sessionTimeout<5||r.sessionTimeout>1440){x.error("O timeout de sessão deve estar entre 5 e 1440 minutos.");return}if(r.maxFileSize<1||r.maxFileSize>100){x.error("O tamanho máximo de arquivo deve estar entre 1 e 100 MB.");return}j(r),r.maintenanceMode!==l.maintenanceMode&&p(r.maintenanceMode),x.success("Configurações salvas com sucesso."),d(!1)}catch(t){console.error("Erro ao salvar configurações:",t),x.error("Não foi possível salvar as configurações.")}finally{g(!1)}},w=()=>{confirm("Tem certeza que deseja descartar as alterações?")&&(o(l),d(!1))},C=async()=>{try{const t={settings:r,timestamp:new Date().toISOString(),version:r.version},c=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),s=URL.createObjectURL(c),a=document.createElement("a");a.href=s,a.download=`backup-sistema-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(s),x.default({title:"Backup Criado",description:"Backup do sistema baixado com sucesso."})}catch(t){console.error("Erro ao criar backup:",t),x.error("Não foi possível criar o backup.")}},T=async t=>{const c=t.target.files?.[0];if(c){if(!r.maintenanceMode){x.error("Ative o modo de manutenção antes de restaurar um backup.");return}try{const s=await c.text(),a=JSON.parse(s);if(!a.settings||!a.version)throw new Error("Formato de backup inválido");o(a.settings),x.success("Configurações restauradas com sucesso. Lembre-se de salvar as alterações.")}catch(s){console.error("Erro ao restaurar backup:",s),x.error("Não foi possível restaurar o backup. Verifique se o arquivo é válido.")}t.target.value=""}};return e.jsxs(z,{className:"border-l-4 border-l-green-500 shadow-sm",children:[e.jsxs(R,{className:"bg-green-50",children:[e.jsxs(I,{className:"flex items-center gap-2 text-gray-900",children:[e.jsx(ie,{className:"h-5 w-5 text-green-500"}),"Configurações do Sistema",i&&e.jsx("span",{className:"ml-2 px-2 py-1 bg-orange-100 text-orange-700 text-xs rounded-full",children:"Alterações não salvas"})]}),e.jsx(q,{className:"text-gray-600",children:"Configure as definições gerais do sistema"})]}),e.jsxs(F,{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(f,{htmlFor:"systemName",children:"Nome do Sistema"}),e.jsx(A,{id:"systemName",value:r.systemName,onChange:t=>u("systemName",t.target.value),placeholder:"Nome do sistema",disabled:!n.hasRole("admin")})]}),e.jsxs("div",{children:[e.jsx(f,{htmlFor:"version",children:"Versão"}),e.jsx(A,{id:"version",value:r.version,disabled:!0,className:"bg-gray-50"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Versão atual do sistema (somente leitura)"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[e.jsx(Te,{className:"h-5 w-5 text-blue-500"}),"Configurações de Sessão"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(f,{htmlFor:"sessionTimeout",children:"Timeout de Sessão (minutos)"}),e.jsx(A,{id:"sessionTimeout",type:"number",min:"5",max:"1440",value:r.sessionTimeout,onChange:t=>u("sessionTimeout",parseInt(t.target.value)||30),disabled:!n.hasRole("admin")}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Entre 5 e 1440 minutos"})]}),e.jsxs("div",{children:[e.jsx(f,{htmlFor:"maxFileSize",children:"Tamanho Máximo de Arquivo (MB)"}),e.jsx(A,{id:"maxFileSize",type:"number",min:"1",max:"100",value:r.maxFileSize,onChange:t=>u("maxFileSize",parseInt(t.target.value)||10),disabled:!n.hasRole("admin")}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Entre 1 e 100 MB"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[e.jsx(D,{className:"h-5 w-5 text-purple-500"}),"Configurações de Sistema"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(B,{id:"maintenanceMode",checked:r.maintenanceMode,onCheckedChange:t=>u("maintenanceMode",t),disabled:!n.hasRole("admin")}),e.jsxs(f,{htmlFor:"maintenanceMode",className:"flex items-center gap-2",children:[e.jsx(ke,{className:"h-4 w-4 text-orange-500"}),"Modo de Manutenção"]})]}),r.maintenanceMode&&e.jsx("div",{className:"ml-6 p-3 bg-orange-50 border border-orange-200 rounded-md",children:e.jsxs("p",{className:"text-sm text-orange-700 flex items-center gap-2",children:[e.jsx(H,{className:"h-4 w-4"}),"O sistema está em modo de manutenção. Apenas administradores podem acessar."]})}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(B,{id:"enableNotifications",checked:r.enableNotifications,onCheckedChange:t=>u("enableNotifications",t),disabled:!n.hasRole("admin")}),e.jsx(f,{htmlFor:"enableNotifications",children:"Habilitar Notificações"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(B,{id:"enableAuditLog",checked:r.enableAuditLog,onCheckedChange:t=>u("enableAuditLog",t),disabled:!n.hasRole("admin")}),e.jsx(f,{htmlFor:"enableAuditLog",children:"Habilitar Log de Auditoria"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[e.jsx(ne,{className:"h-5 w-5 text-indigo-500"}),"Backup e Restauração"]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs(N,{variant:"outline",onClick:C,disabled:!n.hasRole("admin"),className:"flex items-center gap-2",children:[e.jsx(le,{className:"h-4 w-4"}),"Criar Backup"]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"file",accept:".json",onChange:T,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",disabled:!n.hasRole("admin")}),e.jsxs(N,{variant:"outline",disabled:!n.hasRole("admin"),className:"flex items-center gap-2",children:[e.jsx(Me,{className:"h-4 w-4"}),"Restaurar Backup"]})]})]})]}),n.hasRole("admin")&&e.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t",children:[e.jsx(N,{variant:"outline",onClick:w,disabled:!i||h,children:"Descartar Alterações"}),e.jsxs(N,{onClick:y,disabled:!i||h,className:"flex items-center gap-2",children:[e.jsx(De,{className:"h-4 w-4"}),h?"Salvando...":"Salvar Configurações"]})]}),!n.hasRole("admin")&&e.jsx("div",{className:"p-3 bg-gray-50 border border-gray-200 rounded-md",children:e.jsxs("p",{className:"text-sm text-gray-600 flex items-center gap-2",children:[e.jsx(H,{className:"h-4 w-4"}),"Você não tem permissão para alterar as configurações do sistema."]})})]})]})},Pe=({auditLogs:l,onAuditLogsChange:j,currentPage:h,onPageChange:g,totalPages:n,isLoading:x,onLoadingChange:p})=>{const r=$(),{toast:o}=G(),[i,d]=m.useState(""),[u,y]=m.useState(l);m.useEffect(()=>{if(!i.trim())y(l);else{const s=l.filter(a=>a.userId.toLowerCase().includes(i.toLowerCase())||a.action.toLowerCase().includes(i.toLowerCase())||a.resourceType.toLowerCase().includes(i.toLowerCase())||a.ipAddress.includes(i));y(s)}},[l,i]);const w=s=>new Intl.DateTimeFormat("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(s),C=s=>({create:"Criar",read:"Visualizar",update:"Atualizar",delete:"Excluir",export:"Exportar",login:"Login",logout:"Logout",credentials_update:"Atualizar Credenciais",password_change:"Alterar Senha",username_change:"Alterar Nome de Usuário"})[s]||s,T=s=>({create:"default",read:"outline",update:"secondary",delete:"destructive",export:"outline",login:"outline",logout:"outline",credentials_update:"secondary",password_change:"secondary",username_change:"secondary"})[s]||"outline",t=async()=>{if(!r.canViewAuditLogs){o.error("Você não tem permissão para exportar logs de auditoria.");return}try{const s=u.map(S=>({"Data/Hora":w(S.createdAt),Usuário:S.userId,Ação:C(S.action),Recurso:S.resourceType,IP:S.ipAddress,Detalhes:S.details||""})),a=[Object.keys(s[0]).join(","),...s.map(S=>Object.values(S).map(E=>typeof E=="string"&&E.includes(",")?`"${E}"`:E).join(","))].join(`
`),V=new Blob([a],{type:"text/csv;charset=utf-8;"}),K=URL.createObjectURL(V),k=document.createElement("a");k.href=K,k.download=`audit-logs-${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(k),k.click(),document.body.removeChild(k),URL.revokeObjectURL(K),o.success("Logs de auditoria exportados com sucesso.")}catch(s){console.error("Erro ao exportar logs:",s),o.error("Não foi possível exportar os logs de auditoria.")}},c=async()=>{if(r.canViewAuditLogs){p(!0);try{await new Promise(a=>setTimeout(a,1e3));const s=[{id:"1",userId:"admin@sistema.com",action:"login",resourceType:"user",resourceId:"admin-user",details:"Login realizado com sucesso",ipAddress:"192.168.1.100",userAgent:"Mozilla/5.0",createdAt:new Date(Date.now()-1e3*60*30)},{id:"2",userId:"assessor@gabinete.com",action:"create",resourceType:"cabinet",resourceId:"cabinet-1",details:"Gabinete do Vereador João criado",ipAddress:"192.168.1.101",userAgent:"Mozilla/5.0",createdAt:new Date(Date.now()-1e3*60*60)},{id:"3",userId:"admin@sistema.com",action:"update",resourceType:"user",resourceId:"system-settings",details:"Configurações do sistema atualizadas",ipAddress:"192.168.1.100",userAgent:"Mozilla/5.0",createdAt:new Date(Date.now()-1e3*60*90)},{id:"4",userId:"usuario@teste.com",action:"login",resourceType:"user",resourceId:"test-user",details:"Tentativa de login falhada - senha incorreta",ipAddress:"192.168.1.102",userAgent:"Mozilla/5.0",createdAt:new Date(Date.now()-1e3*60*120)}];j(s)}catch(s){console.error("Erro ao carregar logs de auditoria:",s),o.error("Não foi possível carregar os logs de auditoria.")}finally{p(!1)}}};return m.useEffect(()=>{c()},[]),r.canViewAuditLogs?e.jsxs(z,{className:"border-l-4 border-l-red-500 shadow-sm",children:[e.jsxs(R,{className:"bg-red-50",children:[e.jsxs(I,{className:"flex items-center gap-2 text-gray-900",children:[e.jsx(D,{className:"h-5 w-5 text-red-500"}),"Segurança e Auditoria",e.jsxs(L,{variant:"outline",className:"ml-2 bg-red-100 text-red-700 border-red-300",children:[u.length," registros"]})]}),e.jsx(q,{className:"text-gray-600",children:"Monitore atividades do sistema e configurações de segurança"})]}),e.jsxs(F,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[e.jsx(D,{className:"h-5 w-5 text-blue-500"}),"Configurações de Segurança"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(ee,{className:"h-5 w-5 text-green-500"}),e.jsx("span",{className:"font-medium",children:"Autenticação Ativa"})]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Sistema de login seguro habilitado"})]}),e.jsxs("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(ee,{className:"h-5 w-5 text-green-500"}),e.jsx("span",{className:"font-medium",children:"Logs de Auditoria"})]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Todas as ações são registradas"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[e.jsx(se,{className:"h-5 w-5 text-purple-500"}),"Logs de Auditoria"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Ee,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(A,{placeholder:"Buscar logs...",value:i,onChange:s=>d(s.target.value),className:"pl-10 w-64"})]}),e.jsxs(N,{variant:"outline",onClick:t,className:"flex items-center gap-2",disabled:u.length===0,children:[e.jsx(le,{className:"h-4 w-4"}),"Exportar"]})]})]}),x?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"Carregando logs de auditoria..."})]}):u.length>0?e.jsx("div",{className:"border rounded-lg overflow-hidden",children:e.jsxs(ae,{children:[e.jsx(re,{children:e.jsxs(O,{className:"bg-gray-50",children:[e.jsx(b,{className:"font-semibold",children:"Data/Hora"}),e.jsx(b,{className:"font-semibold",children:"Usuário"}),e.jsx(b,{className:"font-semibold",children:"Ação"}),e.jsx(b,{className:"font-semibold",children:"Recurso"}),e.jsx(b,{className:"font-semibold",children:"IP"})]})}),e.jsx(te,{children:u.map(s=>e.jsxs(O,{className:"hover:bg-gray-50",children:[e.jsx(v,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ue,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-sm",children:w(s.createdAt)})]})}),e.jsx(v,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(M,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-sm",children:s.userId})]})}),e.jsx(v,{children:e.jsx(L,{variant:T(s.action),className:"text-xs",children:C(s.action)})}),e.jsx(v,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ze,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-sm",children:s.resourceType})]})}),e.jsx(v,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Re,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-sm font-mono",children:s.ipAddress})]})})]},s.id))})]})}):e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(se,{className:"mx-auto h-12 w-12 text-gray-300 mb-4"}),e.jsx("p",{children:"Nenhum log de auditoria encontrado"}),i&&e.jsx("p",{className:"text-sm mt-2",children:"Tente ajustar os termos de busca"})]}),n>1&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("p",{className:"text-sm text-gray-500",children:["Página ",h," de ",n]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(N,{variant:"outline",size:"sm",onClick:()=>g(h-1),disabled:h===1,children:"Anterior"}),e.jsx(N,{variant:"outline",size:"sm",onClick:()=>g(h+1),disabled:h===n,children:"Próxima"})]})]})]}),e.jsx("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(H,{className:"h-5 w-5 text-blue-500 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-blue-900 mb-1",children:"Sobre os Logs de Auditoria"}),e.jsx("p",{className:"text-sm text-blue-700",children:"Os logs de auditoria registram todas as ações importantes realizadas no sistema, incluindo logins, alterações de dados e configurações. Estes registros são essenciais para a segurança e conformidade do sistema."})]})]})})]})]}):e.jsxs(z,{className:"border-l-4 border-l-red-500 shadow-sm",children:[e.jsx(R,{className:"bg-red-50",children:e.jsxs(I,{className:"flex items-center gap-2 text-gray-900",children:[e.jsx(D,{className:"h-5 w-5 text-red-500"}),"Segurança e Auditoria"]})}),e.jsx(F,{children:e.jsx("div",{className:"p-4 bg-red-50 border border-red-200 rounded-md",children:e.jsxs("p",{className:"text-sm text-red-700 flex items-center gap-2",children:[e.jsx(Le,{className:"h-4 w-4"}),"Você não tem permissão para visualizar as configurações de segurança."]})})})]})},_e=()=>{const l=$(),{isMaintenanceMode:j}=ce(),[h,g]=m.useState([]),[n,x]=m.useState({systemName:"Gabinete Digital",version:Oe.version,sessionTimeout:30,maintenanceMode:j,backupFrequency:"daily",maxFileSize:10,enableNotifications:!0,enableAuditLog:!0}),[p,r]=m.useState([]),[o,i]=m.useState(1),[d,u]=m.useState(!1);m.useEffect(()=>{x(c=>({...c,maintenanceMode:j}))},[j]),m.useEffect(()=>{g([{id:"1",name:"João Silva",email:"joao@gabinete.gov.br",role:"admin",createdAt:new Date("2024-01-15"),updatedAt:new Date("2024-01-20")},{id:"2",name:"Maria Santos",email:"maria@gabinete.gov.br",role:"assessor",createdAt:new Date("2024-01-16"),updatedAt:new Date("2024-01-19")},{id:"3",name:"Pedro Costa",email:"pedro@gabinete.gov.br",role:"visualizador",createdAt:new Date("2024-01-17"),updatedAt:new Date("2024-01-18")}])},[]);const y=c=>{g(c)},w=c=>{x(c)},C=c=>{r(c)},T=c=>{i(c)},t=c=>{u(c)};return l.canManageUsers()?e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"mb-8 p-6 bg-gradient-to-r from-purple-50 to-indigo-50 rounded-lg border-l-4 border-l-purple-500",children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center gap-2",children:[e.jsx(ie,{className:"h-8 w-8 text-purple-600"}),"Configuracoes do Sistema",e.jsx(L,{variant:"outline",className:"ml-2 bg-purple-100 text-purple-700 border-purple-300",children:"Admin"})]}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Gerencie usuários e configuracoes do sistema"})]}),e.jsxs(ye,{defaultValue:"users",className:"space-y-6",children:[e.jsxs(we,{className:"grid w-full grid-cols-3",children:[e.jsxs(P,{value:"users",className:"flex items-center gap-2",children:[e.jsx(J,{className:"h-4 w-4"}),"Usuários"]}),e.jsxs(P,{value:"system",className:"flex items-center gap-2",children:[e.jsx(ne,{className:"h-4 w-4"}),"Sistema"]}),e.jsxs(P,{value:"security",className:"flex items-center gap-2",children:[e.jsx(Ie,{className:"h-4 w-4"}),"Segurança"]})]}),e.jsx(_,{value:"users",className:"space-y-6",children:e.jsx(Ve,{users:h,onUsersChange:y,isLoading:d,onLoadingChange:t})}),e.jsx(_,{value:"system",className:"space-y-6",children:e.jsx(Be,{settings:n,onSettingsChange:w,isLoading:d,onLoadingChange:t})}),e.jsx(_,{value:"security",className:"space-y-6",children:e.jsx(Pe,{auditLogs:p,onAuditLogsChange:C,currentPage:o,onPageChange:T,totalPages:1,isLoading:d,onLoadingChange:t})})]})]}):e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx(D,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"Acesso Negado"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Você não tem permissão para acessar as configuracoes do sistema."})]})})},$e=Object.freeze(Object.defineProperty({__proto__:null,default:_e},Symbol.toStringTag,{value:"Module"}));export{Ge as M,$e as S,ce as u};
